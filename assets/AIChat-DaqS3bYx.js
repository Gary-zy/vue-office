import{d as S,c,a as t,o as a,f as $e,L as Te,q as h,b as je,e as Oe,as as Se,h as n,i as y,r as _,t as f,F as Y,j as W,l as Ke,m as Be,A as te,w as s,n as Ee,x as M,p as u,J as Le,ax as De,z as de,aw as ce,a2 as pe,s as O}from"./index-0AdF0WFe.js";import{d as Ue}from"./dayjs.min-Cyn5YyO7.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Ne}from"./ChevronDownOutline-DEaZbj5B.js";import{C as Re}from"./CopyOutline-DF2wg-zj.js";import{R as ne}from"./RefreshOutline-Dr-3KmOy.js";import{C as He}from"./CheckmarkOutline-BuW2mSAo.js";import{T as Qe}from"./TrashOutline-QSHa6hyp.js";const Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},qe=S({name:"ArrowUpOutline",render:function(p,i){return a(),c("svg",Je,i[0]||(i[0]=[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 244l144-144l144 144"},null,-1),t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M256 120v292"},null,-1)]))}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ge=S({name:"BugOutline",render:function(p,i){return a(),c("svg",Fe,i[0]||(i[0]=[$e('<path d="M370 378c28.89 23.52 46 46.07 46 86" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M142 378c-28.89 23.52-46 46.06-46 86" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M384 208c28.89-23.52 32-56.07 32-96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M128 206c-28.89-23.52-32-54.06-32-94" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M464 288.13h-80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M128 288.13H48"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 192v256"></path><path d="M256 448h0c-70.4 0-128-57.6-128-128v-96.07c0-65.07 57.6-96 128-96h0c70.4 0 128 25.6 128 96V320c0 70.4-57.6 128-128 128z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M179.43 143.52a49.08 49.08 0 0 1-3.43-15.73A80 80 0 0 1 255.79 48h.42A80 80 0 0 1 336 127.79a41.91 41.91 0 0 1-3.12 14.3" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>',9)]))}}),Ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},We=S({name:"PersonOutline",render:function(p,i){return a(),c("svg",Ye,i[0]||(i[0]=[t("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ze=S({name:"RocketOutline",render:function(p,i){return a(),c("svg",Xe,i[0]||(i[0]=[t("path",{d:"M461.81 53.81a4.4 4.4 0 0 0-3.3-3.39c-54.38-13.3-180 34.09-248.13 102.17a294.9 294.9 0 0 0-33.09 39.08c-21-1.9-42-.3-59.88 7.5c-50.49 22.2-65.18 80.18-69.28 105.07a9 9 0 0 0 9.8 10.4l81.07-8.9a180.29 180.29 0 0 0 1.1 18.3a18.15 18.15 0 0 0 5.3 11.09l31.39 31.39a18.15 18.15 0 0 0 11.1 5.3a179.91 179.91 0 0 0 18.19 1.1l-8.89 81a9 9 0 0 0 10.39 9.79c24.9-4 83-18.69 105.07-69.17c7.8-17.9 9.4-38.79 7.6-59.69a293.91 293.91 0 0 0 39.19-33.09c68.38-68 115.47-190.86 102.37-247.95zM298.66 213.67a42.7 42.7 0 1 1 60.38 0a42.65 42.65 0 0 1-60.38 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("path",{d:"M109.64 352a45.06 45.06 0 0 0-26.35 12.84C65.67 382.52 64 448 64 448s65.52-1.67 83.15-19.31A44.73 44.73 0 0 0 160 402.32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},tt=S({name:"SettingsOutline",render:function(p,i){return a(),c("svg",et,i[0]||(i[0]=[t("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},se=S({name:"SparklesOutline",render:function(p,i){return a(),c("svg",nt,i[0]||(i[0]=[t("path",{d:"M259.92 262.91L216.4 149.77a9 9 0 0 0-16.8 0l-43.52 113.14a9 9 0 0 1-5.17 5.17L37.77 311.6a9 9 0 0 0 0 16.8l113.14 43.52a9 9 0 0 1 5.17 5.17l43.52 113.14a9 9 0 0 0 16.8 0l43.52-113.14a9 9 0 0 1 5.17-5.17l113.14-43.52a9 9 0 0 0 0-16.8l-113.14-43.52a9 9 0 0 1-5.17-5.17z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M108 68L88 16L68 68L16 88l52 20l20 52l20-52l52-20l-52-20z"},null,-1),t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M426.67 117.33L400 48l-26.67 69.33L304 144l69.33 26.67L400 240l26.67-69.33L496 144l-69.33-26.67z"},null,-1)]))}}),st={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ot=S({name:"StatsChartOutline",render:function(p,i){return a(),c("svg",st,i[0]||(i[0]=[t("rect",{x:"64",y:"320",width:"48",height:"160",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("rect",{x:"288",y:"224",width:"48",height:"256",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("rect",{x:"400",y:"112",width:"48",height:"368",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("rect",{x:"176",y:"32",width:"48",height:"448",rx:"8",ry:"8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ve=S({name:"StopCircleOutline",render:function(p,i){return a(),c("svg",lt,i[0]||(i[0]=[t("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),t("path",{d:"M310.4 336H201.6a25.62 25.62 0 0 1-25.6-25.6V201.6a25.62 25.62 0 0 1 25.6-25.6h108.8a25.62 25.62 0 0 1 25.6 25.6v108.8a25.62 25.62 0 0 1-25.6 25.6z",fill:"currentColor"},null,-1)]))}}),at={class:"ai-chat-page"},rt={class:"chat-header"},it={class:"header-content"},ut={class:"header-left"},dt={class:"logo-area"},ct={class:"logo-icon"},pt={class:"header-center"},vt={class:"model-name"},mt={class:"header-right"},ft={class:"chat-container"},kt={key:0,class:"welcome-section"},wt={class:"welcome-icon-wrapper"},ht={class:"welcome-icon"},gt={class:"quick-prompts"},yt=["onClick"],_t={class:"prompt-icon"},xt={class:"prompt-text"},Ct={key:1,class:"messages-list"},zt={class:"message-avatar"},At={class:"message-content-area"},bt={class:"message-header"},It={class:"message-role"},Mt={class:"message-time"},Pt={class:"message-body"},$t={key:0,class:"message-loading"},Tt={key:1,class:"message-text"},jt={key:0,class:"typing-text"},Ot={key:1},St={key:2,class:"cursor-blink"},Kt={key:0,class:"message-actions"},Bt={key:0,class:"token-info"},Et={key:1,class:"typing-status"},Lt={class:"input-area"},Dt={class:"input-container"},Ut={class:"input-box"},Vt={class:"input-wrapper-inner"},Nt=["disabled","onKeydown"],Rt=["disabled"],Ht={class:"input-hint"},Qt={class:"hint-text"},Jt={class:"model-list"},qt=["onClick"],Ft={class:"model-info"},Gt={class:"model-title"},Yt={key:0,class:"model-check"},Wt={class:"param-item"},Xt={class:"param-label"},Zt={class:"param-value"},en={class:"param-item"},tn={class:"param-label"},nn={class:"param-value"},sn={class:"param-item"},on={class:"param-label"},ln={class:"param-value"},an={class:"param-item"},rn={class:"param-label"},un={class:"param-value"},oe="ai_chat_api_key",le="https://api.siliconflow.cn/v1/chat/completions",dn={__name:"AIChat",setup(T){const p=Te(),i=h(localStorage.getItem(oe)||""),$=h(""),D=h(!1),b=je(()=>!!i.value),X=h(!1),C=h(""),R=h(!1),j=h([]),H=h(!1),me=l=>{C.value=l,R.value=!1,p.success(`已切换模型: ${l}`)},N=h(!1),z=h({temperature:.7,maxTokens:8192,topP:.7}),x=h([]),P=h(""),ae=h(null),K=h(!1),Q=h(null),fe=[{text:"帮我写一段代码",icon:Ke},{text:"解释一个概念",icon:Be},{text:"头脑风暴",icon:Ze}],J=h(!1),B=h([]),q=h(30),U=new Map,m=(l,e="info",d=null)=>{B.value.push({message:l,type:e,details:d?JSON.stringify(d,null,2):null,timestamp:new Date}),B.value.length>20&&B.value.shift()},F=async()=>{if(!i.value){m("无法获取模型列表：未配置 API Key","warning");return}H.value=!0,m("正在获取模型列表...","info");try{const l=await fetch("https://api.siliconflow.cn/v1/models?sub_type=chat",{method:"GET",headers:{Authorization:`Bearer ${i.value}`}});if(!l.ok){const d=await l.text();throw m("获取模型列表失败","error",d),new Error(`获取模型列表失败: ${l.status}`)}const e=await l.json();if(m("成功获取模型列表","success",e),e.data&&Array.isArray(e.data))j.value=e.data.map(d=>({label:d.id,value:d.id})),j.value.length>0&&!C.value&&(C.value=j.value[0].value,m(`默认选择模型: ${C.value}`,"info")),p.success(`成功加载 ${j.value.length} 个可用模型`);else throw new Error("模型列表格式错误")}catch(l){console.error("获取模型列表失败:",l),m(`获取模型列表失败: ${l.message}`,"error"),p.error(`获取模型列表失败: ${l.message}`),j.value=[{label:"DeepSeek V3.1",value:"deepseek-ai/DeepSeek-V3.1"},{label:"Qwen QwQ-32B",value:"Qwen/QwQ-32B"}],C.value||(C.value=j.value[0].value),m("已切换到备用模型列表","warning")}finally{H.value=!1}},ke=async()=>{if(!$.value){p.warning("请输入 API Key");return}i.value=$.value,localStorage.setItem(oe,$.value),D.value=!1,$.value="",p.success("API Key 已保存"),m("API Key 已更新","success"),await F()},we=()=>{i.value="",$.value="",localStorage.removeItem(oe),p.success("API Key 已清除"),m("API Key 已清除","info")},he=async()=>{const l=$.value||i.value;if(!l){p.warning("请先输入 API Key");return}X.value=!0,m("测试 API 连接...","info");try{const e=await fetch(le,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({model:C.value,messages:[{role:"user",content:"你好"}],max_tokens:10,stream:!1})});if(m(`响应状态: ${e.status} ${e.statusText}`,e.ok?"success":"error"),!e.ok){const w=await e.text();throw m("API 错误响应","error",w),new Error(`API 返回错误: ${e.status}`)}const d=await e.json();m("API 连接成功","success",d),p.success("API 连接测试成功！")}catch(e){m(`连接失败: ${e.message}`,"error"),p.error(`连接失败: ${e.message}`),console.error("测试连接失败:",e)}finally{X.value=!1}},ge=(l,e)=>new Promise(d=>{U.has(l)&&clearInterval(U.get(l));const w=x.value[l];if(!w){d();return}w.typing=!0,w.displayContent="";let r=0;const v=setInterval(()=>{r<e.length?(w.displayContent=e.substring(0,r+1),r++,re()):(clearInterval(v),U.delete(l),w.typing=!1,w.displayContent=e,d())},q.value);U.set(l,v)}),Z=()=>{U.forEach(l=>{clearInterval(l)}),U.clear(),x.value.forEach(l=>{l.typing&&(l.typing=!1,l.displayContent=l.content)})},ye=l=>{P.value=l,pe(()=>{ae.value?.focus()})},_e=l=>{},ee=async()=>{if(!P.value.trim()||K.value)return;if(!i.value){p.warning("请先在设置中配置 API Key"),N.value=!0;return}const l=P.value.trim();P.value="",m(`发送用户消息: ${l.substring(0,50)}...`,"info"),x.value.push({role:"user",content:l,timestamp:new Date});const e=x.value.length;x.value.push({role:"assistant",content:"",loading:!0,timestamp:new Date}),re(),K.value=!0;let d=e;try{const w=x.value.slice(-20).filter(A=>!A.loading).map(A=>({role:A.role,content:A.content})),r={model:C.value,messages:w,max_tokens:z.value.maxTokens,temperature:z.value.temperature,top_p:z.value.topP,stream:!1};m("发送 API 请求","info",{url:le,model:C.value,messageCount:w.length,settings:z.value});const v=await fetch(le,{method:"POST",headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(m(`收到响应: ${v.status} ${v.statusText}`,v.ok?"info":"error"),!v.ok){const A=await v.text();let k={};try{k=JSON.parse(A)}catch{k={error:{message:A}}}m("API 错误","error",k);const L=k.error?.message||k.message||`HTTP ${v.status}: ${v.statusText}`;throw new Error(L)}const g=await v.json();m("收到 AI 响应","success",g);let I="",E=null;if(g.choices&&g.choices[0]?(I=g.choices[0].message?.content||"",E=g.usage||null):g.content&&Array.isArray(g.content)?(I=g.content.find(k=>k.type==="text")?.text||"",E=g.usage||null):g.content&&(I=typeof g.content=="string"?g.content:"",E=g.usage||null),!I)throw m("未收到有效的 AI 回复内容","error",g),new Error("未收到有效的回复内容");m(`AI 回复长度: ${I.length} 字符`,"success",{contentPreview:I.substring(0,100)+"...",usage:E}),x.value[e]={role:"assistant",content:I,displayContent:"",loading:!1,typing:!1,timestamp:new Date,usage:E},await ge(e,I),p.success("回复已收到")}catch(w){console.error("AI 请求失败:",w),m(`请求失败: ${w.message}`,"error",w);let r=w.message||"未知错误";r.includes("Failed to fetch")?r="网络请求失败，可能是跨域问题或网络连接问题。建议：1) 检查网络连接 2) 尝试使用代理 3) 查看浏览器控制台获取详细错误":r.includes("401")?r="API Key 无效，请检查您的 API Key 是否正确":r.includes("429")?r="API 请求频率超限，请稍后再试":(r.includes("500")||r.includes("502")||r.includes("503"))&&(r="API 服务器错误，请稍后再试"),p.error(r,{duration:5e3}),x.value.splice(d,1)}finally{K.value=!1}},xe=async l=>{try{await navigator.clipboard.writeText(l),p.success("已复制到剪贴板")}catch{p.error("复制失败")}},Ce=async l=>{if(l===0||x.value[l-1].role!=="user"){p.warning("无法重新生成：没有对应的用户消息");return}const e=x.value[l-1].content;x.value.splice(l,1),P.value=e,await ee()},ze=()=>{Z(),x.value=[],p.success("对话已清空")},re=()=>{pe(()=>{Q.value&&(Q.value.scrollTop=Q.value.scrollHeight)})},ie=l=>Ue(l).format("HH:mm:ss");return Oe(async()=>{b.value?await F():(N.value=!0,p.info("请先配置 API Key 以开始使用"))}),Se(()=>{Z()}),(l,e)=>{const d=_("n-icon"),w=_("n-avatar"),r=_("n-button"),v=_("n-text"),g=_("n-drawer-content"),I=_("n-drawer"),E=_("n-alert"),A=_("n-tag"),k=_("n-space"),L=_("n-card"),ue=_("n-input"),Ae=_("n-collapse-transition"),be=_("n-divider"),G=_("n-slider"),Ie=_("n-empty"),Me=_("n-scrollbar");return a(),c("div",at,[t("div",rt,[t("div",it,[t("div",ut,[t("div",dt,[t("div",ct,[n(d,{component:y(se),size:"22"},null,8,["component"])]),e[15]||(e[15]=t("div",{class:"logo-text"},[t("div",{class:"logo-title"},"AI 助手")],-1))])]),t("div",pt,[t("div",{class:"model-selector",onClick:e[0]||(e[0]=o=>R.value=!0)},[t("span",vt,f(C.value||"选择模型"),1),n(d,{component:y(Ne),size:"16"},null,8,["component"])])]),t("div",mt,[t("button",{class:"header-icon-btn",onClick:e[1]||(e[1]=o=>N.value=!0)},[n(d,{component:y(tt),size:"20"},null,8,["component"])])])])]),t("div",ft,[t("div",{class:"messages-area",ref_key:"messagesContainer",ref:Q},[x.value.length===0?(a(),c("div",kt,[t("div",wt,[t("div",ht,[n(d,{component:y(se),size:"72"},null,8,["component"])])]),e[16]||(e[16]=t("h1",{class:"welcome-title"},"Hello.",-1)),e[17]||(e[17]=t("h2",{class:"welcome-subtitle"},"我是 AI 助手",-1)),e[18]||(e[18]=t("p",{class:"welcome-text"},"我可以帮你回答问题、编写代码、创作内容",-1)),t("div",gt,[(a(),c(Y,null,W(fe,o=>t("div",{key:o.text,class:"prompt-card",onClick:V=>ye(o.text)},[t("div",_t,[n(d,{component:o.icon,size:"22"},null,8,["component"])]),t("span",xt,f(o.text),1)],8,yt)),64))])])):(a(),c("div",Ct,[(a(!0),c(Y,null,W(x.value,(o,V)=>(a(),c("div",{key:V,class:te(["message-wrapper",{"message-user":o.role==="user","message-assistant":o.role==="assistant"}])},[t("div",zt,[n(w,{size:36,style:Ee({background:o.role==="user"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"})},{default:s(()=>[n(d,{component:o.role==="user"?y(We):y(se),size:20},null,8,["component"])]),_:2},1032,["style"])]),t("div",At,[t("div",bt,[t("span",It,f(o.role==="user"?"你":"AI 助手"),1),t("span",Mt,f(ie(o.timestamp)),1)]),t("div",Pt,[o.loading?(a(),c("div",$t,[...e[19]||(e[19]=[t("div",{class:"typing-indicator"},[t("span"),t("span"),t("span")],-1)])])):(a(),c("div",Tt,[o.typing?(a(),c("span",jt,f(o.displayContent||""),1)):(a(),c("span",Ot,f(o.content),1)),o.typing?(a(),c("span",St,"|")):M("",!0)]))]),!o.loading&&!o.typing&&o.role==="assistant"?(a(),c("div",Kt,[n(r,{text:"",size:"tiny",onClick:Pe=>xe(o.content)},{icon:s(()=>[n(d,{component:y(Re)},null,8,["component"])]),default:s(()=>[e[20]||(e[20]=u(" 复制 ",-1))]),_:1},8,["onClick"]),n(r,{text:"",size:"tiny",onClick:Pe=>Ce(V)},{icon:s(()=>[n(d,{component:y(ne)},null,8,["component"])]),default:s(()=>[e[21]||(e[21]=u(" 重新生成 ",-1))]),_:1},8,["onClick"]),o.usage&&o.usage.total_tokens?(a(),c("span",Bt,[n(d,{component:y(ot),size:"14"},null,8,["component"]),u(" "+f(o.usage.total_tokens)+" tokens ",1)])):M("",!0)])):M("",!0),o.typing?(a(),c("div",Et,[n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[...e[22]||(e[22]=[u(" 正在输入中... ",-1)])]),_:1})])):M("",!0)])],2))),128))]))],512),t("div",Lt,[t("div",Dt,[t("div",Ut,[t("div",Vt,[Le(t("textarea",{ref_key:"inputRef",ref:ae,"onUpdate:modelValue":e[2]||(e[2]=o=>P.value=o),placeholder:"请输入消息...",disabled:K.value||!b.value,onKeydown:[de(ce(ee,["exact","prevent"]),["enter"]),de(ce(_e,["shift"]),["enter"])],class:"chat-input",rows:"1"},null,40,Nt),[[De,P.value]]),t("button",{disabled:!P.value.trim()||K.value||!b.value,onClick:ee,class:te(["send-button",{"send-button-active":P.value.trim()&&!K.value&&b.value}])},[n(d,{component:K.value?y(ve):y(qe),size:20},null,8,["component"])],10,Rt)])]),t("div",Ht,[t("span",Qt,f(P.value.length)+" 字符",1),e[23]||(e[23]=t("span",{class:"hint-separator"},"·",-1)),e[24]||(e[24]=t("span",{class:"hint-text"},"Enter 发送，Shift+Enter 换行",-1))])])])]),n(I,{show:R.value,"onUpdate:show":e[3]||(e[3]=o=>R.value=o),width:480,placement:"bottom",height:480},{default:s(()=>[n(g,{title:"选择模型",closable:""},{footer:s(()=>[n(r,{block:"",onClick:F,loading:H.value,secondary:""},{icon:s(()=>[n(d,{component:y(ne)},null,8,["component"])]),default:s(()=>[e[25]||(e[25]=u(" 刷新模型列表 ",-1))]),_:1},8,["loading"])]),default:s(()=>[t("div",Jt,[(a(!0),c(Y,null,W(j.value,o=>(a(),c("div",{key:o.value,class:te(["model-item",{"model-item-active":C.value===o.value}]),onClick:V=>me(o.value)},[t("div",Ft,[t("div",Gt,f(o.label),1)]),C.value===o.value?(a(),c("div",Yt,[n(d,{component:y(He),size:"20"},null,8,["component"])])):M("",!0)],10,qt))),128))])]),_:1})]),_:1},8,["show"]),n(I,{show:N.value,"onUpdate:show":e[14]||(e[14]=o=>N.value=o),width:400,placement:"right"},{default:s(()=>[n(g,{title:"设置",closable:""},{default:s(()=>[n(k,{vertical:"",size:20},{default:s(()=>[n(E,{type:b.value?"success":"warning"},{header:s(()=>[u(" API Key "+f(b.value?"已配置":"未配置"),1)]),default:s(()=>[u(" "+f(b.value?"API Key 已安全保存在本地":"请配置 API Key 以使用对话功能"),1)]),_:1},8,["type"]),n(L,{title:"模型管理",size:"small"},{default:s(()=>[n(k,{vertical:"",size:12},{default:s(()=>[n(k,{justify:"space-between",align:"center"},{default:s(()=>[n(v,null,{default:s(()=>[...e[26]||(e[26]=[u("当前模型",-1)])]),_:1}),n(A,{type:"info",size:"small"},{default:s(()=>[u(f(C.value||"未选择"),1)]),_:1})]),_:1}),n(k,{justify:"space-between",align:"center"},{default:s(()=>[n(v,null,{default:s(()=>[...e[27]||(e[27]=[u("可用模型",-1)])]),_:1}),n(A,{type:"success",size:"small"},{default:s(()=>[u(f(j.value.length)+" 个 ",1)]),_:1})]),_:1}),n(r,{block:"",size:"small",onClick:F,loading:H.value,secondary:""},{icon:s(()=>[n(d,{component:y(ne)},null,8,["component"])]),default:s(()=>[e[28]||(e[28]=u(" 刷新模型列表 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1}),n(L,{title:"API Key 管理",size:"small"},{default:s(()=>[n(k,{vertical:"",size:12},{default:s(()=>[n(k,{justify:"space-between",align:"center"},{default:s(()=>[n(v,null,{default:s(()=>[...e[29]||(e[29]=[u("状态",-1)])]),_:1}),n(A,{type:b.value?"success":"default",size:"small"},{default:s(()=>[u(f(b.value?"已配置":"未配置"),1)]),_:1},8,["type"])]),_:1}),n(Ae,{show:D.value},{default:s(()=>[n(k,{vertical:"",size:12},{default:s(()=>[n(ue,{value:$.value,"onUpdate:value":e[4]||(e[4]=o=>$.value=o),type:"password",placeholder:"sk-xxxxxxxxxxxxxxxx","show-password-on":"click"},null,8,["value"]),n(k,null,{default:s(()=>[n(r,{type:"primary",size:"small",onClick:ke},{default:s(()=>[...e[30]||(e[30]=[u(" 保存 ",-1)])]),_:1}),n(r,{size:"small",onClick:e[5]||(e[5]=o=>D.value=!1)},{default:s(()=>[...e[31]||(e[31]=[u(" 取消 ",-1)])]),_:1}),n(r,{size:"small",onClick:he,loading:X.value,disabled:!$.value},{default:s(()=>[...e[32]||(e[32]=[u(" 测试连接 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["show"]),D.value?M("",!0):(a(),O(k,{key:0},{default:s(()=>[b.value?(a(),O(r,{key:0,size:"small",onClick:e[6]||(e[6]=o=>D.value=!0)},{default:s(()=>[...e[33]||(e[33]=[u(" 更新 API Key ",-1)])]),_:1})):(a(),O(r,{key:1,type:"primary",size:"small",onClick:e[7]||(e[7]=o=>D.value=!0)},{default:s(()=>[...e[34]||(e[34]=[u(" 配置 API Key ",-1)])]),_:1})),b.value?(a(),O(r,{key:2,size:"small",type:"error",onClick:we},{default:s(()=>[...e[35]||(e[35]=[u(" 清除 ",-1)])]),_:1})):M("",!0)]),_:1})),n(be,{style:{margin:"8px 0"}}),n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[e[37]||(e[37]=u(" 获取 API Key： ",-1)),n(r,{text:"",tag:"a",href:"https://cloud.siliconflow.cn",target:"_blank",type:"primary",size:"tiny"},{default:s(()=>[...e[36]||(e[36]=[u(" 访问官网 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),n(L,{title:"模型参数",size:"small"},{default:s(()=>[n(k,{vertical:"",size:16},{default:s(()=>[t("div",Wt,[t("div",Xt,[e[38]||(e[38]=t("span",null,"Temperature",-1)),t("span",Zt,f(z.value.temperature),1)]),n(G,{value:z.value.temperature,"onUpdate:value":e[8]||(e[8]=o=>z.value.temperature=o),min:0,max:2,step:.1},null,8,["value"]),n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[...e[39]||(e[39]=[u(" 控制随机性，越高越随机 ",-1)])]),_:1})]),t("div",en,[t("div",tn,[e[40]||(e[40]=t("span",null,"Max Tokens",-1)),t("span",nn,f(z.value.maxTokens),1)]),n(G,{value:z.value.maxTokens,"onUpdate:value":e[9]||(e[9]=o=>z.value.maxTokens=o),min:100,max:32768,step:100},null,8,["value"]),n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[...e[41]||(e[41]=[u(" 最大输出长度 ",-1)])]),_:1})]),t("div",sn,[t("div",on,[e[42]||(e[42]=t("span",null,"Top P",-1)),t("span",ln,f(z.value.topP),1)]),n(G,{value:z.value.topP,"onUpdate:value":e[10]||(e[10]=o=>z.value.topP=o),min:.1,max:1,step:.1},null,8,["value"]),n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[...e[43]||(e[43]=[u(" 核采样参数 ",-1)])]),_:1})])]),_:1})]),_:1}),n(L,{title:"打字机效果",size:"small"},{default:s(()=>[n(k,{vertical:"",size:12},{default:s(()=>[t("div",an,[t("div",rn,[e[44]||(e[44]=t("span",null,"打字速度",-1)),t("span",un,f(q.value)+"ms",1)]),n(G,{value:q.value,"onUpdate:value":e[11]||(e[11]=o=>q.value=o),min:10,max:100,step:5,marks:{10:"快",50:"中",100:"慢"}},null,8,["value"]),n(v,{depth:"3",style:{"font-size":"12px"}},{default:s(()=>[...e[45]||(e[45]=[u(" 控制 AI 回复的打字速度 ",-1)])]),_:1})]),n(r,{block:"",size:"small",onClick:Z,secondary:""},{icon:s(()=>[n(d,{component:y(ve)},null,8,["component"])]),default:s(()=>[e[46]||(e[46]=u(" 跳过打字动画 ",-1))]),_:1})]),_:1})]),_:1}),n(k,{vertical:"",size:12},{default:s(()=>[n(r,{block:"",onClick:ze,secondary:""},{icon:s(()=>[n(d,{component:y(Qe)},null,8,["component"])]),default:s(()=>[e[47]||(e[47]=u(" 清空对话 ",-1))]),_:1}),n(r,{block:"",onClick:e[12]||(e[12]=o=>J.value=!J.value),secondary:""},{icon:s(()=>[n(d,{component:y(Ge)},null,8,["component"])]),default:s(()=>[u(" "+f(J.value?"隐藏":"显示")+"调试日志 ",1)]),_:1})]),_:1}),J.value?(a(),O(L,{key:0,title:"调试日志",size:"small"},{action:s(()=>[B.value.length>0?(a(),O(r,{key:0,text:"",type:"error",size:"small",onClick:e[13]||(e[13]=o=>B.value=[])},{default:s(()=>[...e[48]||(e[48]=[u(" 清空日志 ",-1)])]),_:1})):M("",!0)]),default:s(()=>[n(Me,{style:{"max-height":"300px"}},{default:s(()=>[n(k,{vertical:"",size:8},{default:s(()=>[(a(!0),c(Y,null,W(B.value,(o,V)=>(a(),c("div",{key:V,class:"debug-log-item"},[n(v,{type:o.type==="error"?"error":o.type==="success"?"success":"default",style:{"font-size":"12px"}},{default:s(()=>[u(" ["+f(ie(o.timestamp))+"] "+f(o.message),1)]),_:2},1032,["type"]),o.details?(a(),O(v,{key:0,depth:"3",style:{"font-size":"11px",display:"block","margin-left":"12px","white-space":"pre-wrap","margin-top":"4px"}},{default:s(()=>[u(f(o.details),1)]),_:2},1024)):M("",!0)]))),128)),B.value.length===0?(a(),O(Ie,{key:0,description:"暂无日志",size:"small"})):M("",!0)]),_:1})]),_:1})]),_:1})):M("",!0)]),_:1})]),_:1})]),_:1},8,["show"])])}}},gn=Ve(dn,[["__scopeId","data-v-b1ab8dfe"]]);export{gn as default};
