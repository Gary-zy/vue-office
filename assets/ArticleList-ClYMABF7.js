import{v as ee,u as U,r as m,s as _,o as n,w as o,a,t as l,c as b,x as T,F as L,j as P,p as i,h as r,i as A,A as j,q as O,b as C,y as te,G as ae}from"./index-0AdF0WFe.js";import{H as se,T as ne,f as le}from"./date-aQUvjWek.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as oe}from"./EyeOutline-DrYnRbGu.js";import{C as re,L as ie}from"./ListOutline-CTxCJ0RT.js";const ce={class:"article-cover"},ue=["src","alt"],de={class:"article-content"},me={class:"article-title"},ge={class:"article-summary"},ve={class:"article-tags"},pe={class:"article-footer"},_e={class:"author-info"},ye={class:"author-name"},fe={class:"article-stats"},he={class:"stat-item"},Ce={class:"stat-item"},be={class:"stat-item"},ke={class:"article-time"},ze={class:"reading-time"},we={__name:"ArticleCard",props:{article:{type:Object,required:!0}},setup(t){const $=t,g=ee(),k=U(),x=u=>k.categories.find(v=>v.id===u)?.name||u,N=u=>k.categories.find(v=>v.id===u)?.color||"#1890ff",d=u=>u>=1e3?(u/1e3).toFixed(1)+"k":u,y=u=>le(u),f=()=>{g.push(`/blog/article/${$.article.id}`)};return(u,z)=>{const v=m("n-tag"),B=m("n-avatar"),h=m("n-icon"),S=m("n-card");return n(),_(S,{class:j(["article-card",{featured:t.article.isFeatured}]),hoverable:"",onClick:f},{cover:o(()=>[a("div",ce,[a("img",{src:t.article.cover,alt:t.article.title,loading:"lazy"},null,8,ue),t.article.isTop?(n(),_(v,{key:0,type:"error",size:"small",class:"top-badge"},{default:o(()=>[...z[0]||(z[0]=[i(" 置顶 ",-1)])]),_:1})):T("",!0),r(v,{color:{color:N(t.article.category),textColor:"#fff"},size:"small",class:"category-badge"},{default:o(()=>[i(l(x(t.article.category)),1)]),_:1},8,["color"])])]),default:o(()=>[a("div",de,[a("h3",me,l(t.article.title),1),a("p",ge,l(t.article.summary),1),a("div",ve,[(n(!0),b(L,null,P(t.article.tags.slice(0,3),w=>(n(),_(v,{key:w,size:"small",bordered:!1,class:"tag-item"},{default:o(()=>[i(" # "+l(w),1)]),_:2},1024))),128)),t.article.tags.length>3?(n(),_(v,{key:0,size:"small",bordered:!1,class:"tag-item"},{default:o(()=>[i(" +"+l(t.article.tags.length-3),1)]),_:1})):T("",!0)]),a("div",pe,[a("div",_e,[r(B,{src:t.article.author.avatar,size:24,round:""},null,8,["src"]),a("span",ye,l(t.article.author.name),1)]),a("div",fe,[a("span",he,[r(h,{component:A(oe)},null,8,["component"]),i(" "+l(d(t.article.views)),1)]),a("span",Ce,[r(h,{component:A(se)},null,8,["component"]),i(" "+l(d(t.article.likes)),1)]),a("span",be,[r(h,{component:A(re)},null,8,["component"]),i(" "+l(d(t.article.comments)),1)])])]),a("div",ke,[r(h,{component:A(ne),size:"14"},null,8,["component"]),a("span",null,l(y(t.article.publishTime)),1),a("span",ze,"· "+l(t.article.readingTime)+" 分钟阅读",1)])])]),_:1},8,["class"])}}},Te=q(we,[["__scopeId","data-v-c976f730"]]),Ae={class:"article-list"},xe={key:0,class:"filter-tags"},$e={class:"list-header"},Se={class:"list-info"},Fe={class:"result-count"},Oe={class:"list-actions"},Ne={key:1,class:"loading-container"},Be={key:4,class:"pagination-container"},Le={__name:"ArticleList",props:{initialArticles:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(t){const $=t,g=U(),k=O("grid"),x=O("latest"),N=[{label:"最新发布",value:"latest"},{label:"最热门",value:"popular"},{label:"最多点赞",value:"likes"}],d=O(1),y=O(10),f=C(()=>$.initialArticles.length>0?$.initialArticles:g.filteredArticles),u=C(()=>{const s=[...f.value];switch(x.value){case"latest":return s.sort((e,p)=>new Date(p.publishTime)-new Date(e.publishTime));case"popular":return s.sort((e,p)=>p.views-e.views);case"likes":return s.sort((e,p)=>p.likes-e.likes);default:return s}}),z=C(()=>{const s=(d.value-1)*y.value,e=s+y.value;return u.value.slice(s,e)}),v=C(()=>Math.ceil(f.value.length/y.value)),B=C(()=>h.value||S.value.length>0||w.value),h=C(()=>g.currentCategory),S=C(()=>g.currentTags),w=C(()=>g.searchKeyword),G=s=>g.categories.find(p=>p.id===s)?.name||s,V=s=>{k.value=s},H=()=>{d.value=1},K=s=>{d.value=s,window.scrollTo({top:0,behavior:"smooth"})},M=s=>{y.value=s,d.value=1},R=()=>{g.setCategory(null)},I=s=>{g.removeTag(s)},J=()=>{g.clearSearch()},D=()=>{g.clearFilters()};return te(()=>f.value.length,()=>{d.value>v.value&&(d.value=1)}),(s,e)=>{const p=m("n-tag"),F=m("n-button"),E=m("n-icon"),Q=m("n-button-group"),W=m("n-select"),X=m("n-spin"),Y=m("n-empty"),Z=m("n-pagination");return n(),b("div",Ae,[B.value?(n(),b("div",xe,[h.value?(n(),_(p,{key:0,closable:"",type:"info",onClose:R},{default:o(()=>[i(" 分类: "+l(G(h.value)),1)]),_:1})):T("",!0),(n(!0),b(L,null,P(S.value,c=>(n(),_(p,{key:c,closable:"",type:"success",onClose:Pe=>I(c)},{default:o(()=>[i(" 标签: "+l(c),1)]),_:2},1032,["onClose"]))),128)),w.value?(n(),_(p,{key:1,closable:"",type:"warning",onClose:J},{default:o(()=>[i(" 搜索: "+l(w.value),1)]),_:1})):T("",!0),r(F,{text:"",size:"small",type:"error",onClick:D},{default:o(()=>[...e[4]||(e[4]=[i(" 清空筛选 ",-1)])]),_:1})])):T("",!0),a("div",$e,[a("div",Se,[a("span",Fe,[e[5]||(e[5]=i(" 找到 ",-1)),a("strong",null,l(f.value.length),1),e[6]||(e[6]=i(" 篇文章 ",-1))])]),a("div",Oe,[r(Q,{size:"small"},{default:o(()=>[r(F,{type:k.value==="grid"?"primary":"default",onClick:e[0]||(e[0]=c=>V("grid"))},{icon:o(()=>[r(E,{component:A(ae)},null,8,["component"])]),_:1},8,["type"]),r(F,{type:k.value==="list"?"primary":"default",onClick:e[1]||(e[1]=c=>V("list"))},{icon:o(()=>[r(E,{component:A(ie)},null,8,["component"])]),_:1},8,["type"])]),_:1}),r(W,{value:x.value,"onUpdate:value":[e[2]||(e[2]=c=>x.value=c),H],options:N,size:"small",style:{width:"120px"}},null,8,["value"])])]),t.loading?(n(),b("div",Ne,[r(X,{size:"large"})])):f.value.length>0?(n(),b("div",{key:2,class:j(["articles-container",k.value])},[(n(!0),b(L,null,P(z.value,c=>(n(),_(Te,{key:c.id,article:c},null,8,["article"]))),128))],2)):(n(),_(Y,{key:3,size:"large",description:"暂无文章"},{extra:o(()=>[r(F,{onClick:D},{default:o(()=>[...e[7]||(e[7]=[i(" 清空筛选条件 ",-1)])]),_:1})]),_:1})),f.value.length>y.value?(n(),b("div",Be,[r(Z,{page:d.value,"onUpdate:page":[e[3]||(e[3]=c=>d.value=c),K],"page-count":v.value,"page-size":y.value,"show-size-picker":"","page-sizes":[10,20,30,50],"onUpdate:pageSize":M},{prefix:o(({itemCount:c})=>[i(" 共 "+l(c)+" 条 ",1)]),_:1},8,["page","page-count","page-size"])])):T("",!0)])}}},qe=q(Le,[["__scopeId","data-v-ffe48561"]]);export{qe as A};
