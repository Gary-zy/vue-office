import{d as N,c as r,o as s,a as e,v as _e,q as O,e as b,s as Q,C as pe,x as W,r as i,D as ve,l as L,f as z,j as t,k as v,g as p,w as n,E as he,F as U,m as V,p as G,z as J,t as c,H as X,u as fe,b as ge,I as ke,h as we,i as ye}from"./index-Iy6KDkAz.js";import{e as xe,r as Ce}from"./markdown-DnJce2-J.js";import{f as be,T as K,a as Te}from"./date-D4o1PSGN.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as $e,C as ze}from"./ListOutline-Ce2nNbw8.js";import{C as Le,a as Se}from"./ChevronUpOutline-iPIkwFoQ.js";import{H as ee}from"./HeartOutline--fJ5ZXgq.js";import{E as Ae}from"./EyeOutline-Bd7d3U-f.js";const Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Be=N({name:"ChatbubblesOutline",render:function(h,l){return s(),r("svg",Oe,l[0]||(l[0]=[e("path",{d:"M431 320.6c-1-3.6 1.2-8.6 3.3-12.2a33.68 33.68 0 0 1 2.1-3.1A162 162 0 0 0 464 215c.3-92.2-77.5-167-173.7-167c-83.9 0-153.9 57.1-170.3 132.9a160.7 160.7 0 0 0-3.7 34.2c0 92.3 74.8 169.1 171 169.1c15.3 0 35.9-4.6 47.2-7.7s22.5-7.2 25.4-8.3a26.44 26.44 0 0 1 9.3-1.7a26 26 0 0 1 10.1 2l56.7 20.1a13.52 13.52 0 0 0 3.9 1a8 8 0 0 0 8-8a12.85 12.85 0 0 0-.5-2.7z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),e("path",{d:"M66.46 232a146.23 146.23 0 0 0 6.39 152.67c2.31 3.49 3.61 6.19 3.21 8s-11.93 61.87-11.93 61.87a8 8 0 0 0 2.71 7.68A8.17 8.17 0 0 0 72 464a7.26 7.26 0 0 0 2.91-.6l56.21-22a15.7 15.7 0 0 1 12 .2c18.94 7.38 39.88 12 60.83 12A159.21 159.21 0 0 0 284 432.11",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},te=N({name:"Heart",render:function(h,l){return s(),r("svg",Me,l[0]||(l[0]=[e("path",{d:"M256 448a32 32 0 0 1-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8c-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 0 0 9.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64c.54 54.21-18.63 104.26-58.61 153c-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 0 1-18 5.56z",fill:"currentColor"},null,-1)]))}}),He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ie=N({name:"ShareSocialOutline",render:function(h,l){return s(),r("svg",He,l[0]||(l[0]=[_e('<circle cx="128" cy="256" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="112" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="384" cy="400" r="48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M169.83 279.53l172.34 96.94"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M342.17 135.53l-172.34 96.94"></path>',5)]))}}),De={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ee=N({name:"Star",render:function(h,l){return s(),r("svg",De,l[0]||(l[0]=[e("path",{d:"M394 480a16 16 0 0 1-9.39-3L256 383.76L127.39 477a16 16 0 0 1-24.55-18.08L153 310.35L23 221.2a16 16 0 0 1 9-29.2h160.38l48.4-148.95a16 16 0 0 1 30.44 0l48.4 149H480a16 16 0 0 1 9.05 29.2L359 310.35l50.13 148.53A16 16 0 0 1 394 480z",fill:"currentColor"},null,-1)]))}}),je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ue=N({name:"StarOutline",render:function(h,l){return s(),r("svg",je,l[0]||(l[0]=[e("path",{d:"M480 208H308L256 48l-52 160H32l140 96l-54 160l138-100l138 100l-54-160z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),Ve={class:"toc-header"},Ne={class:"toc-title"},Re={class:"toc-content"},Fe=["onClick"],Ye={class:"toc-text"},Ze={key:0,class:"reading-progress"},qe={class:"progress-bar"},Pe={class:"progress-text"},Ge={__name:"TOC",props:{content:{type:String,required:!0},isFixed:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0}},setup(T){const h=T,l=O(!1),g=O(""),m=O(0),k=b(()=>h.content?xe(h.content):[]),M=()=>{l.value=!l.value},B=S=>{const y=document.getElementById(S);y&&(y.scrollIntoView({behavior:"smooth",block:"start"}),g.value=S)},o=()=>{const S=window.pageYOffset||document.documentElement.scrollTop,y=document.documentElement.scrollHeight-document.documentElement.clientHeight;m.value=Math.round(S/y*100);const d=k.value.map(u=>{const f=document.getElementById(u.id);if(f){const $=f.getBoundingClientRect();return{id:u.id,top:$.top}}return null}).filter(Boolean),a=d.find(u=>u.top>=0&&u.top<=200);if(a)g.value=a.id;else if(d.length>0){const u=d.filter(f=>f.top<0);u.length>0&&(g.value=u[u.length-1].id)}};let H=null;const I=()=>{H||(H=setTimeout(()=>{o(),H=null},100))};return Q(()=>{window.addEventListener("scroll",I),setTimeout(o,100)}),pe(()=>{window.removeEventListener("scroll",I)}),W(()=>h.content,()=>{setTimeout(o,100)}),(S,y)=>{const d=i("n-icon"),a=i("n-button"),u=i("n-empty");return s(),r("div",{class:J(["toc-container",{fixed:T.isFixed}])},[e("div",Ve,[e("h4",Ne,[t(d,{component:p($e)},null,8,["component"]),y[0]||(y[0]=v(" 目录 ",-1))]),k.value.length>0?(s(),z(a,{key:0,text:"",size:"tiny",onClick:M},{default:n(()=>[t(d,{component:l.value?p(Le):p(Se)},null,8,["component"])]),_:1})):L("",!0)]),ve(e("div",Re,[(s(!0),r(U,null,V(k.value,(f,$)=>(s(),r("div",{key:$,class:J(["toc-item",`level-${f.level}`,{active:g.value===f.id}]),style:G({paddingLeft:`${(f.level-1)*16}px`}),onClick:j=>B(f.id)},[e("span",Ye,c(f.text),1)],14,Fe))),128)),k.value.length===0?(s(),z(u,{key:0,description:"暂无目录",size:"small"})):L("",!0)],512),[[he,!l.value]]),T.showProgress?(s(),r("div",Ze,[e("div",qe,[e("div",{class:"progress-fill",style:G({width:`${m.value}%`})},null,4)]),e("div",Pe," 阅读进度: "+c(m.value)+"% ",1)])):L("",!0)],2)}}},Je=q(Ge,[["__scopeId","data-v-410d55bb"]]),Ke={class:"comment-section"},Qe={class:"comment-header"},We={class:"comment-title"},Xe={class:"comment-input-wrapper"},et={class:"comment-actions"},tt={key:0,class:"comment-list"},nt={class:"comment-content"},ot={class:"comment-author-info"},st={class:"author-name"},lt={class:"comment-time"},at={class:"comment-text"},it={class:"comment-operations"},rt={key:0,class:"replies"},ct={class:"reply-content"},ut={class:"reply-author"},dt={class:"author-name"},mt={key:0,class:"reply-to"},_t={class:"reply-to-name"},pt={class:"reply-text"},vt={class:"reply-time"},ht={key:2,class:"load-more"},ft={__name:"Comment",props:{articleId:{type:String,required:!0}},setup(T){const h=X(),l=O(""),g=O(!1),m=O(10),k=O([{id:"comment_001",author:{name:"技术爱好者",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User1"},content:"这篇文章写得非常好，学到了很多东西！特别是关于性能优化的部分，很有启发。",createTime:"2024-01-20T10:30:00Z",likes:42,isLiked:!1,replies:[{id:"reply_001",author:{name:"作者",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Author"},content:"谢谢支持！后续会继续分享更多实用的技术文章。",createTime:"2024-01-20T11:00:00Z",replyTo:"技术爱好者"}]},{id:"comment_002",author:{name:"前端开发",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User2"},content:"代码示例很清晰，跟着敲了一遍，理解更深刻了。希望能多出这样的教程。",createTime:"2024-01-21T09:15:00Z",likes:28,isLiked:!1,replies:[]},{id:"comment_003",author:{name:"学习中",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User3"},content:"请问有相关的源码仓库吗？想看看完整的实现。",createTime:"2024-01-22T14:20:00Z",likes:15,isLiked:!1,replies:[]}]),M=b(()=>k.value.slice(0,m.value)),B=b(()=>k.value.length>m.value),o=d=>be(d),H=()=>{l.value.trim()&&(g.value=!0,setTimeout(()=>{const d={id:`comment_${Date.now()}`,author:{name:"当前用户",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=CurrentUser"},content:l.value,createTime:new Date().toISOString(),likes:0,isLiked:!1,replies:[]};k.value.unshift(d),l.value="",g.value=!1,h.success("评论发表成功！")},500))},I=d=>{const a=k.value.find(u=>u.id===d);a&&(a.isLiked?(a.likes--,a.isLiked=!1):(a.likes++,a.isLiked=!0))},S=d=>{h.info("回复功能开发中...")},y=()=>{m.value+=10};return(d,a)=>{const u=i("n-icon"),f=i("n-input"),$=i("n-button"),j=i("n-avatar"),Y=i("n-empty");return s(),r("div",Ke,[e("div",Qe,[e("h3",We,[t(u,{component:p(Be)},null,8,["component"]),v(" 评论 ("+c(k.value.length)+") ",1)])]),e("div",Xe,[t(f,{value:l.value,"onUpdate:value":a[0]||(a[0]=_=>l.value=_),type:"textarea",placeholder:"写下你的评论...",autosize:{minRows:3,maxRows:8},maxlength:500,"show-count":""},null,8,["value"]),e("div",et,[t($,{type:"primary",disabled:!l.value.trim(),loading:g.value,onClick:H},{default:n(()=>[...a[1]||(a[1]=[v(" 发表评论 ",-1)])]),_:1},8,["disabled","loading"])])]),k.value.length>0?(s(),r("div",tt,[(s(!0),r(U,null,V(M.value,_=>(s(),r("div",{key:_.id,class:"comment-item"},[t(j,{src:_.author.avatar,size:40,round:"",class:"comment-avatar"},null,8,["src"]),e("div",nt,[e("div",ot,[e("span",st,c(_.author.name),1),e("span",lt,c(o(_.createTime)),1)]),e("div",at,c(_.content),1),e("div",it,[t($,{text:"",size:"small",onClick:x=>I(_.id)},{icon:n(()=>[t(u,{component:_.isLiked?p(te):p(ee),color:_.isLiked?"#ff6b6b":void 0},null,8,["component","color"])]),default:n(()=>[v(" "+c(_.likes),1)]),_:2},1032,["onClick"]),t($,{text:"",size:"small",onClick:x=>S(_.id)},{icon:n(()=>[t(u,{component:p(ze)},null,8,["component"])]),default:n(()=>[a[2]||(a[2]=v(" 回复 ",-1))]),_:1},8,["onClick"])]),_.replies&&_.replies.length>0?(s(),r("div",rt,[(s(!0),r(U,null,V(_.replies,x=>(s(),r("div",{key:x.id,class:"reply-item"},[t(j,{src:x.author.avatar,size:32,round:""},null,8,["src"]),e("div",ct,[e("div",ut,[e("span",dt,c(x.author.name),1),x.replyTo?(s(),r("span",mt,[a[3]||(a[3]=v(" 回复 ",-1)),e("span",_t,"@"+c(x.replyTo),1)])):L("",!0)]),e("div",pt,c(x.content),1),e("div",vt,c(o(x.createTime)),1)])]))),128))])):L("",!0)])]))),128))])):(s(),z(Y,{key:1,description:"暂无评论，来抢沙发吧~",size:"large"})),B.value?(s(),r("div",ht,[t($,{text:"",onClick:y},{default:n(()=>[...a[4]||(a[4]=[v(" 加载更多评论 ",-1)])]),_:1})])):L("",!0)])}}},gt=q(ft,[["__scopeId","data-v-0737860a"]]),kt={class:"article-detail"},wt={key:0,class:"loading-container"},yt={key:1,class:"not-found"},xt={class:"content-container"},Ct={class:"article-title"},bt={class:"article-meta"},Tt={class:"meta-item"},$t={class:"meta-item"},zt={class:"meta-item"},Lt={class:"meta-item"},St={class:"article-tags"},At={key:0,class:"article-cover"},Ot=["src","alt"],Bt=["innerHTML"],Mt=["src","alt"],Ht={__name:"ArticleDetail",setup(T){const h=ke(),l=ye(),g=X(),m=fe(),k=ge(),M=O(!0),B=b(()=>h.params.id),o=O(null),H=b(()=>k.isDark),I=b(()=>o.value?.content?Ce(o.value.content):""),S=b(()=>o.value&&m.categories.find(w=>w.id===o.value.category)?.name||""),y=b(()=>o.value&&m.categories.find(w=>w.id===o.value.category)?.color||"#1890ff"),d=b(()=>o.value?m.likedArticles.includes(o.value.id):!1),a=b(()=>o.value?m.collectedArticles.includes(o.value.id):!1),u=b(()=>o.value?m.getRelatedArticles(o.value.id,5):[]),f=()=>{M.value=!0,setTimeout(()=>{o.value=m.getArticleById(B.value),M.value=!1,o.value&&(document.title=`${o.value.title} - 技术博客`)},300)},$=()=>{m.likeArticle(B.value),g.success(d.value?"已点赞":"取消点赞")},j=()=>{m.collectArticle(B.value),g.success(a.value?"已收藏":"取消收藏")},Y=()=>{const A=window.location.href;navigator.clipboard.writeText(A).then(()=>{g.success("链接已复制到剪贴板")}).catch(()=>{g.error("复制失败")})},_=A=>{m.addTag(A),l.push("/blog")},x=A=>{l.push(`/blog/article/${A}`)};return W(()=>h.params.id,()=>{h.name==="ArticleDetail"&&(f(),window.scrollTo(0,0))}),Q(()=>{f()}),(A,w)=>{const ne=i("n-spin"),R=i("n-button"),oe=i("n-result"),Z=i("n-tag"),D=i("n-space"),se=i("n-avatar"),E=i("n-icon"),F=i("n-card"),le=i("n-thing"),ae=i("n-list-item"),ie=i("n-list"),P=i("n-grid-item"),re=i("n-grid"),ce=i("n-layout-content"),ue=i("n-layout"),de=i("n-config-provider");return s(),z(de,{theme:H.value?p(we):null},{default:n(()=>[e("div",kt,[M.value?(s(),r("div",wt,[t(ne,{size:"large"})])):o.value?(s(),z(ue,{key:2},{default:n(()=>[t(ce,{class:"article-content"},{default:n(()=>[e("div",xt,[t(re,{cols:24,"x-gap":24,"y-gap":24,responsive:"screen"},{default:n(()=>[t(P,{span:24,"xl-span":18},{default:n(()=>[t(F,{class:"article-header-card"},{default:n(()=>[t(D,{size:8,style:{"margin-bottom":"16px"}},{default:n(()=>[t(Z,{color:{color:y.value,textColor:"#fff"},size:"medium"},{default:n(()=>[v(c(S.value),1)]),_:1},8,["color"]),o.value.isTop?(s(),z(Z,{key:0,type:"error",size:"medium"},{default:n(()=>[...w[2]||(w[2]=[v(" 置顶 ",-1)])]),_:1})):L("",!0)]),_:1}),e("h1",Ct,c(o.value.title),1),e("div",bt,[t(D,{size:16},{default:n(()=>[e("div",Tt,[t(se,{src:o.value.author.avatar,size:24,round:""},null,8,["src"]),e("span",null,c(o.value.author.name),1)]),e("div",$t,[t(E,{component:p(K)},null,8,["component"]),e("span",null,c(p(Te)(o.value.publishTime,"YYYY-MM-DD")),1)]),e("div",zt,[t(E,{component:p(K)},null,8,["component"]),e("span",null,c(o.value.readingTime)+" 分钟阅读",1)]),e("div",Lt,[t(E,{component:p(Ae)},null,8,["component"]),e("span",null,c(o.value.views)+" 次浏览",1)])]),_:1})]),e("div",St,[t(D,{size:8},{default:n(()=>[(s(!0),r(U,null,V(o.value.tags,C=>(s(),z(Z,{key:C,type:"primary",bordered:!1,size:"small",onClick:me=>_(C)},{default:n(()=>[v(" # "+c(C),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1}),o.value.cover?(s(),r("div",At,[e("img",{src:o.value.cover,alt:o.value.title},null,8,Ot)])):L("",!0),t(F,{class:"article-body"},{default:n(()=>[e("div",{class:"markdown-body",innerHTML:I.value},null,8,Bt)]),_:1}),t(F,{class:"article-actions"},{default:n(()=>[t(D,{justify:"space-between"},{default:n(()=>[t(D,{size:16},{default:n(()=>[t(R,{type:d.value?"primary":"default",onClick:$},{icon:n(()=>[t(E,{component:d.value?p(te):p(ee)},null,8,["component"])]),default:n(()=>[v(" "+c(o.value.likes)+" 点赞 ",1)]),_:1},8,["type"]),t(R,{type:a.value?"primary":"default",onClick:j},{icon:n(()=>[t(E,{component:a.value?p(Ee):p(Ue)},null,8,["component"])]),default:n(()=>[v(" "+c(o.value.collections)+" 收藏 ",1)]),_:1},8,["type"])]),_:1}),t(D,{size:16},{default:n(()=>[t(R,{onClick:Y},{icon:n(()=>[t(E,{component:p(Ie)},null,8,["component"])]),default:n(()=>[w[3]||(w[3]=v(" 分享 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),u.value.length>0?(s(),z(F,{key:1,title:"相关推荐"},{default:n(()=>[t(ie,null,{default:n(()=>[(s(!0),r(U,null,V(u.value,C=>(s(),z(ae,{key:C.id,class:"related-item",onClick:me=>x(C.id)},{default:n(()=>[t(le,null,{avatar:n(()=>[e("img",{src:C.cover,alt:C.title,class:"related-cover"},null,8,Mt)]),header:n(()=>[v(c(C.title),1)]),description:n(()=>[v(c(C.summary),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):L("",!0),t(gt,{"article-id":B.value},null,8,["article-id"])]),_:1}),t(P,{span:24,"xl-span":6},{default:n(()=>[o.value.content?(s(),z(Je,{key:0,content:o.value.content,"is-fixed":!0,"show-progress":!0},null,8,["content"])):L("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})):(s(),r("div",yt,[t(oe,{status:"404",title:"文章不存在",description:"抱歉，您访问的文章不存在或已被删除"},{footer:n(()=>[t(R,{onClick:w[0]||(w[0]=C=>A.$router.push("/blog"))},{default:n(()=>[...w[1]||(w[1]=[v(" 返回博客首页 ",-1)])]),_:1})]),_:1})]))])]),_:1},8,["theme"])}}},Ft=q(Ht,[["__scopeId","data-v-9a84f1f9"]]);export{Ft as default};
